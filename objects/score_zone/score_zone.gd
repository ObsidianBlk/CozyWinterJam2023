@tool
extends Node2D

# ------------------------------------------------------------------------------
# Signals
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Constants and ENUMs
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Export Variables
# ------------------------------------------------------------------------------
@export_category("Score Zone")
@export var radius : float = 16.0:						set = set_radius
@export_range(0.0, 180.0) var angle : float = 0.0:		set = set_angle

# ------------------------------------------------------------------------------
# Variables
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Onready Variables
# ------------------------------------------------------------------------------
@onready var _flag1: StaticBody2D = $Flag1
@onready var _flag2: StaticBody2D = $Flag2


# ------------------------------------------------------------------------------
# Setters / Getters
# ------------------------------------------------------------------------------
func set_radius(r : float) -> void:
	if r > 0.0:
		radius = r
		_UpdateLayout()

func set_angle(a : float) -> void:
	angle = wrapf(a, 0.0, 180.0)
	_UpdateLayout()

# ------------------------------------------------------------------------------
# Override Methods
# ------------------------------------------------------------------------------
func _ready() -> void:
	_UpdateLayout()

# ------------------------------------------------------------------------------
# Private Methods
# ------------------------------------------------------------------------------
func _Cart2Iso(ccoord : Vector2) -> Vector2:
	var iso : Vector2 = Vector2(
		ccoord.x - ccoord.y,
		(ccoord.x + ccoord.y) * 0.5
	)
	return iso

func _UpdateLayout() -> void:
	var pos : Vector2 = (Vector2.RIGHT * radius).rotated(deg_to_rad(angle))
	_flag1.position = _Cart2Iso(pos)
	_flag2.position = _Cart2Iso(pos.rotated(deg_to_rad(180.0)))

# ------------------------------------------------------------------------------
# Public Methods
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Handler Methods
# ------------------------------------------------------------------------------



